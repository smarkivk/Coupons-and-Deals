window.SimplSettings = {"shop": "lil-goodness.myshopify.com", "config":null}
!function(){"use strict";const t="simpl-payin3-offer-modal",e=["product","cart","collection"],i=["product","collection"],n=["cart"],o="https://get.geojs.io/v1/ip/country.json",r={CHECK_COUNTRY:"check-country"};function s(t){t>11&&(t-=12);return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t]}function l(t){if(!t)return 0;const e=parseInt(String(Math.floor(t/3))),i=e+parseInt(String(t-3*e));return parseFloat((i/100).toFixed(2))}const a=function(t){var e;return null==(e=document.evaluate(t||null,document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null))?void 0:e.singleNodeValue},d=function(t){return document.querySelector(t)};const c=function(){let t=document.createElement("span"),e=!0;var i,n;return t.className="fa",t.style.display="none",document.body.insertBefore(t,document.body.firstChild),"FontAwesome"!==(i=t,n="font-family",window.getComputedStyle(i,null).getPropertyValue(n))&&(e=!1),document.body.removeChild(t),e},h=async function(){return fetch("/cart.js")},p=function(){const t=document.URL;return e.find((e=>t.includes("/"+e)))},u=function(){const t=[{selector:"getElementByName",id:"updated[]",page:"cart"}].find((({selector:t,id:e},i)=>document[t](e).length>-1));return null==t?void 0:t.page},g=function(t){let e,i,n,o;return t.match(/^rgb/)?(e=(t=t.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/))[1],i=t[2],n=t[3]):(e=(t=+("0x"+t.slice(1).replace(t.length<5&&/./g,"$&$&")))>>16,i=t>>8&255,n=255&t),o=Math.sqrt(e*e*.299+i*i*.587+n*n*.114),o>127.5?"light":"dark"},m=t=>{let e=null==t?void 0:t.replace(/₹|Rs.|RS.|\s|\,/g,"");const i=null==e?void 0:e.match(/\d+\.{0,1}\d+/g);return e=i&&i[0],100*Number(e)};function f(t){if(!t)return!1;const e=getComputedStyle(t);if("none"===e.display)return!1;if("visible"!==e.visibility)return!1;if(Number(e.opacity)<.1)return!1;if(t.offsetWidth+t.offsetHeight+t.getBoundingClientRect().height+t.getBoundingClientRect().width===0)return!1;const i={x:t.getBoundingClientRect().left+t.offsetWidth/2,y:t.getBoundingClientRect().top+t.offsetHeight/2};if(i.x<0)return!1;if(i.x>(document.documentElement.clientWidth||window.innerWidth))return!1;if(i.y<0)return!1;if(i.y>(document.documentElement.clientHeight||window.innerHeight))return!1;let n=document.elementFromPoint(i.x,i.y);do{if(n===t)return!0}while(n=n.parentElement);return!1}const v=new class{constructor(){this.log=(t,e=null)=>{this.clientEventLogs.push({msg:t,data:e,duration:performance.now()})},this.clientEventLogs=[]}},y=v.log,w=function(){var t,e;return null==(e=null==(t=null==window?void 0:window.ShopifyAnalytics)?void 0:t.meta)?void 0:e.selectedVariantId};const b=new class{constructor(){this.pageType="",this.scriptVersion="v2"}init(){try{this.initializeShopifyConfig(),this.initializeSimplConfig()}catch(t){y(null==t?void 0:t.message),this.shopifyConfig=this.simplConfig=null}}validateConfig(){var t,e,i,n;return!!this.shopifyConfig&&(!!this.simplConfig&&(!!("cart"!==this.pageType||(null==(t=this.simplConfig.cart)?void 0:t.renderToPath)&&(null==(e=this.simplConfig.cart)?void 0:e.priceXPath))&&!!("product"!==this.pageType||(null==(i=this.simplConfig.product)?void 0:i.renderToPath)&&(null==(n=this.simplConfig.product)?void 0:n.priceXPath))))}initializeShopifyConfig(){const{Shopify:t,ShopifyAnalytics:e}=window;if(!t||!e)throw new Error("No Shopify or ShopifyAnalytics");const{products:o,product:r=[],page:s={},selectedVariantId:l=null}=e.meta;let a=(null==s?void 0:s.pageType)||window.pageTypeForSimpl||p()||u();if(!a)throw new Error(`Invalid pageType or more than 1 product. PageType = ${a},  Product length ${o.length}`);const{shop:d,theme:c={}}=t;if(n.indexOf(a)>-1)this.pageType="cart",this.shopifyConfig={pageType:"cart",productType:"cart",shop:window.Shopify.shop,themeId:c.id,themeStoreId:c.theme_store_id};else if(i.indexOf(a)>-1){this.pageType="product";const{id:t,type:e,vendor:i,variants:n}=r;this.shopifyConfig={pageType:a,productType:e,productId:t,merchant:i,shop:d,selectedVariantId:l,themeId:c.id,themeStoreId:c.theme_store_id,variants:Array.isArray(n)&&n.reduce(((t,e)=>(t[null==e?void 0:e.id]=e,t)),{})}}else{this.pageType="home";const{vendor:t,variants:e}=r;this.shopifyConfig={pageType:a,merchant:t,shop:d,themeId:c.id,themeStoreId:c.theme_store_id,variants:Array.isArray(e)&&e.reduce(((t,e)=>(t[null==e?void 0:e.id]=e,t)),{})}}}initializeSimplConfig(){var t;if(null==(t=null==window?void 0:window.SimplSettings)?void 0:t.config){const t=window.SimplSettings.config.product,e=window.SimplSettings.config.cart,i=window.SimplSettings.config.ajaxcart;this.simplConfig={product:t,cart:e,ajaxcart:i},y("V2 Widget rendered")}else this.scriptVersion="v1",y("V1 Widget rendered"),null==window||window.executiveSimplPi3V1()}};const C=new class{constructor(){this.observerConfig={attributes:!0,childList:!0,subtree:!0}}startObserver(t,e){try{const i=document.querySelector("body"),n=new MutationObserver(e);return n.observe(t||i,this.observerConfig),n}catch(i){console.log({err:i})}}URLChangeObserver(t){var e=document.URL;return Number(setInterval((()=>{var i=document.URL;i&&e!=i&&(e=i,t())}),50))}cartChangeObserver(t){const{fetch:e}=window;window.fetch=async(...i)=>{const n=await e(...i);return(null==n?void 0:n.url)&&["/cart/add.js","/cart/update.js","/cart/change.js","/cart/clear.js","/cart.js"].includes(function(t){try{return new URL(t).pathname}catch(e){return""}}(null==n?void 0:n.url))&&n.clone().json().then((e=>t(e))).catch((t=>console.error(t))),n}}};const S=new class{constructor(t){this.imgUrl=t}constructAndInsertModal(){var t,e;const i=document.createElement("style");i.innerHTML='div.simple-offer-modal-w3-button:after {\n                          display: inline-block;\n                          content: "\\00d7";\n                          /* This will render the \'X\' */\n                      }\n\n                      .simpl-w3-modal {\n                        top: 0;\n                        visibility: hidden;\n                        position: fixed;\n                        width: 100%;\n                        height: 100%;\n                        z-index: 9900000099999;\n                        display: flex;\n                        justify-content: center;\n                        align-items: center;\n                        background: rgba(0, 0, 0, 0.4);\n                      }\n\n                      .simpl-w3-modal-content {\n                          margin: auto;\n                          background-color: #fff;\n                          position: relative;\n                          padding: 0;\n                          outline: 0;  \n                          width: 340px !important;\n                      }\n\n                      @media (max-width: 768px) {\n                          .simpl-w3-modal-content {}\n\n                          .simpl-w3-modal {\n                              padding-top: 50px;\n                          }\n                      }\n\n                      @media (max-width: 600px) {\n\n\n                          .simpl-w3-modal {\n                              padding-top: 30px;\n                          }\n\n                          @media (min-width: 993px) {\n\n                              .w3-hide-large {\n                                  display: none !important;\n                              }\n\n                              .w3-sidebar.w3-collapse {\n                                  display: block !important;\n                              }\n                          }\n\n                          .simpl-w3-container:after,\n                          .simpl-w3-container:before {\n                              content: "";\n                              display: table;\n                              clear: both;\n                          }\n\n                          .simple-offer-modal-w3-button:hover {\n                              color: #000 !important;\n                              background-color: #ccc !important;\n                          }\n                      }\n\n                      .simple-offer-modal-w3-button {\n                          white-space: normal;\n                      }\n\n                      .simple-offer-modal-w3-button:disabled {\n                          cursor: not-allowed;\n                          opacity: 0.3;\n                      }\n\n                      .simple-offer-modal-w3-button {\n                          border: none;\n                          display: inline-block;\n                          padding: 8px 16px;\n                          vertical-align: middle;\n                          overflow: hidden;\n                          text-decoration: none;\n                          color: inherit;\n                          background-color: inherit;\n                          text-align: center;\n                          cursor: pointer;\n                          white-space: nowrap;\n                      }\n\n                      .simple-offer-modal-w3-button {\n                          -webkit-touch-callout: none;\n                          -webkit-user-select: none;\n                          -khtml-user-select: none;\n                          -moz-user-select: none;\n                          -ms-user-select: none;\n                          user-select: none;\n                      }\n\n                      .simpl-w3-display-topright {\n                          position: absolute;\n                          right: 0;\n                          top: 0;\n                          color: black !important;\n                      }\n\n                      .simple-offer-modal-w3-button.simpl-w3-display-topright:hover {\n                          background: lightgrey;\n                      }\n\n                      body.simpl-offer-disbale-scroll {\n                          overflow: hidden;\n                      }\n\n                      #simpl_body_div {\n                        width: 340px;\n                        height: 662px;\n                        background: transparent;\n                      }',null==(t=this.bodyEle)||t.appendChild(i);null==(e=this.bodyEle)||e.insertAdjacentHTML("beforeend",'<div id="simpl-payin3-offer-modal" class="simpl-w3-modal">\n                          <div>\n                              <div>\n                                  <div id="simpl_body_div">\n                                      <iframe id="simpl-payin3-dynamic-popup" src="https://d19ud5ez64hf3q.cloudfront.net/popup/index.html"\n                                          style="width: 340px; height:662px; border: none; background: white">\n                                  </div>\n                              </div>\n                          </div>\n                      </div>')}initializeModal(){var e,i;this.bodyEle=document.querySelector("body"),this.constructAndInsertModal(),this.modalEle=document.getElementById(t),null==(e=document.querySelector("#simpl-payin3-offer-modal"))||e.addEventListener("click",(t=>{var e;"simpl-payin3-offer-modal"===(null==(e=null==t?void 0:t.target)?void 0:e.id)&&this.closeModal()})),this.iframe_window=null==(i=document.getElementById("simpl-payin3-dynamic-popup"))?void 0:i.contentWindow,null==window||window.addEventListener("message",(t=>{console.log(t),"simp_modal_close"==t.data.message&&this.closeModal()}),!1)}closeModal(){var t;const e=null==(t=null==this?void 0:this.modalEle)?void 0:t.style;e&&(e.visibility="hidden",this.enableBackgroundScroll())}showModal(t){var e,i;const n=null==(e=null==this?void 0:this.modalEle)?void 0:e.style;n&&(n.visibility="visible",this.disableBackgroundScroll(),console.log({data:t,f:this.iframe_window}),null==(i=this.iframe_window)||i.postMessage(t,"https://d19ud5ez64hf3q.cloudfront.net/"))}disableBackgroundScroll(){var t,e;null==(e=null==(t=this.bodyEle)?void 0:t.classList)||e.add("simpl-offer-disbale-scroll")}enableBackgroundScroll(){var t,e;null==(e=null==(t=this.bodyEle)?void 0:t.classList)||e.remove("simpl-offer-disbale-scroll")}}("https://cdn.getsimpl.com/images/pay_in_3/interstitial_1.jpg");class P{constructor(){this.priceXPath="",this.renderToPath="",this.priceXPathFallback="",this.renderToPathFallback="",this.currentDate=new Date,this.configId="",({shopifyConfig:this.shopifyConfig,simplConfig:this.simplConfig}=b)}updateConfig(){if(this.simplConfig[this.configId]){const{priceXPath:t,renderToPath:e,style:i,priceXPathFallback:n,renderToPathFallback:o,insertMethod:r}=this.simplConfig[this.configId];this.priceXPath=t,this.renderToPath=e,this.style=i,this.priceXPathFallback=n,this.renderToPathFallback=o,this.insertMethod=r}}validatePrice(t){return t}getPriceElement(){let t=a(this.priceXPath);return!t&&this.priceXPathFallback&&(t=d(this.priceXPathFallback)),t}deleteWidget(){var t;const e=`simpl_${this.configId}_div`;null==(t=document.getElementById(e))||t.remove()}getRenderElement(){let t=a(this.renderToPath);return!t&&this.renderToPathFallback&&(t=d(this.renderToPathFallback)),t}getMode(t){try{return g(window.getComputedStyle(t).color)}catch(e){}}getFormattedText(t){var e,i;let n=null==(e=(new Date).toISOString())?void 0:e.slice(0,10);const o=`simpl_${this.configId}_div`;if(null==(i=document.getElementById(o))||i.remove(),this.total_price&&this.total_price>25e5)return"";return`<div id="${o}" class="simpl-div" style=${t} data-date="${n}">\n                              <span class="splitpayinfo-root-Qe9">Or 3 interest free payments of\n                                  <span>${"₹ "+l(this.total_price)}</span> with\n                                  <svg xmlns="http://www.w3.org/2000/svg" style="vertical-align: middle;width: 54px;display: inline-block;" viewBox="0 0 208 72">\n                                    <path fill="#00d1c1" d="M49.62 17.778l6.876-6.948-1.51-1.493c-12.18-12.06-31.903-11.96-43.963.22C-.537 21.232-.917 39.827 9.79 51.97l-6.876 6.946 1.508 1.493c12.18 12.057 31.904 11.958 43.964-.222 11.558-11.672 11.94-30.268 1.234-42.412m-35.58-5.232c9.91-10.01 25.81-10.57 36.387-1.625l-3.922 3.96C38.09 8.044 25.698 8.585 17.91 16.452c-7.79 7.863-8.2 20.26-1.283 28.61L12.78 48.95c-9.05-10.49-8.646-26.395 1.26-36.402m31.328 44.65C35.458 67.21 19.556 67.772 8.98 58.83l3.92-3.962c8.416 6.836 20.808 6.296 28.596-1.57 7.79-7.864 8.2-20.26 1.284-28.61l3.846-3.884c9.05 10.487 8.648 26.39-1.257 36.4m72.594-31.766l6.283-.032.024 4.842c3.186-6.448 13.807-7.945 16.227-.132h.104c2.17-4.32 7.525-6.417 12.103-5.044 4.213 1.264 5.468 5.556 5.488 9.54l.086 16.896-6.54.033-.08-15.66c-.014-2.738-.74-5.455-4.028-5.22-3.22.225-5.238 3.065-5.91 5.99-.252 1.03-.297 2.164-.29 3.4l.058 11.537-6.543.033-.08-15.657c-.014-2.9-.867-5.643-4.342-5.186-3.084.403-4.965 3.18-5.645 6.008-.252.98-.296 2.166-.29 3.352l.058 11.535-6.543.033-.132-26.27h-.004zm87.334 20.267c-1.698.01-2.684-.706-2.698-3.59l-.138-27.403-6.457 6.53.11 21.885c.038 7.52 4.52 8.423 8.128 8.405 1.082-.006 2.06-.16 2.06-.16l-.03-5.72s-.46.052-.975.053m-16.923-16.048c-2.314-3.718-6.5-5.554-10.82-5.066-2.78.313-5.687 1.778-7.1 4.292l-.018-3.71-5.977.03.194 38.693 6.51-6.592-.045-8.85c2.21 3.187 6.563 4.076 10.16 3.276 9.396-2.088 11.663-14.725 7.092-22.075m-10.927 16.863c-4.015.02-6.285-3.653-6.55-7.293-.227-3.046.58-6.663 3.427-8.287 2.35-1.342 5.476-.982 7.396.943 4.193 4.214 2.735 14.602-4.273 14.638M105.112 25.49l6.543-.032.132 26.278-6.543.033-.132-26.28zm-4.68 13.994c-1.036-4.574-5.385-6.74-9.353-8.382-2.62-1.084-7.82-2.426-7.69-6.08.13-3.613 4.364-4.57 7.254-4.085 1.632.274 3.247.922 4.685 1.814l4.33-4.374c-3.935-3.74-10.785-4.663-15.724-2.855-5.33 1.954-8.986 7.96-6.49 13.48 1.838 4.06 6.482 5.75 10.294 7.387 2.928 1.254 8.076 3.468 5.778 7.603-1.635 2.944-5.867 2.623-8.57 1.698a15.257 15.257 0 0 1-4.315-2.314l-4.35 4.395c3.832 3.837 10.13 5.432 15.34 4.42 5.928-1.152 10.187-6.596 8.808-12.706"></path>\n                                  </svg>\n                                  <span id="showSimplModalDiv" class="splitpayinfo-icon-3KY" style="cursor:pointer;">\n                                      <i class="fa fa-info-circle" aria-hidden="true" style="font-family: 'FontAwesome'!important;"></i>\n                                  </span>\n                              </span>\n                          </div>`}constructSimplWidgetEle(){const t=this.getWidgetStyle();this.widgetEle=this.total_price>0?this.getFormattedText(t):""}getWidgetStyle(){const t=this.style;let e="";try{t&&Object.keys(t).forEach((i=>{e+=`${i}:${t[i]};`}))}catch(i){}return e?JSON.stringify(e):""}appendSimplWidgetToDOM(){var t;try{this.widgetEle&&(null==(t=this.renderToEle)||t.insertAdjacentHTML(this.insertMethod||"afterend",this.widgetEle),document.getElementById("showSimplModalDiv").addEventListener("click",(()=>{if(this.total_price){const t=l(this.total_price),e=function(){const t=new Date,e=t.getDate();let i=t.getMonth();return e>20&&(i+=1),[s(i+1),s(i+2)]}();S.showModal({price:this.total_price/100,installment_price:t,second_installment_date:`by ${e[0]} 5`,third_installment_date:`by ${e[1]} 5`})}})))}catch(e){}}}class E extends P{constructor(){super(),this.configId="cart",this.updateConfig()}getPrice(){var t;return this.cached_price||m(null==(t=this.getPriceElement())?void 0:t.textContent)}renderToDOM(){const t=this.validatePrice(this.getPrice()),e=`simpl_${this.configId}_div`;if(console.log("cart >> ",this.total_price,t),this.total_price!==t||!document.getElementById(e)){console.log("rendered",this.total_price,t),y("Cart Rerendered",{old:this.total_price,new:t}),this.total_price=t,this.cached_price=null;const e=this.getRenderElement();this.total_price&&e?(this.renderToEle=e,this.constructSimplWidgetEle(),y("Cart widget reconstructed"),this.widgetEle&&this.appendSimplWidgetToDOM()):(this.total_price,y("Cart widget deleted"),this.deleteWidget())}return this}startObserver(){return C.cartChangeObserver((t=>{this.cached_price=t.total_price,this.renderToDOM()})),!this.priceXPath&&this.insertMethod&&h(),C.startObserver(null,(()=>{this.renderToDOM()}))}}class _ extends E{constructor(){super(),this.configId="ajaxcart",this.updateConfig()}startMutationObserver(){return y("Ajax Cart Mutations Start"),!this.priceXPath&&this.insertMethod&&h(),C.startObserver(null,(()=>{setTimeout((()=>{const t=f(this.getRenderElement());console.log("checking Ajaxcart visibility."),t&&(console.log("Ajaxcart visible."),this.renderToDOM())}),800)}))}}class x extends P{constructor(){super(),this.configId="product",this.updateConfig()}getPrice(){var t;let e=new URLSearchParams(window.location.search);const{variants:i={}}=this.shopifyConfig;let n;if(null!=e.get("variant")&&null!=i[e.get("variant")])n=e.get("variant");else{if(!i[w()])return m(null==(t=this.getPriceElement())?void 0:t.textContent);n=w()}const o=i[n];return null==o?void 0:o.price}renderToDOM(){const t=this.validatePrice(this.getPrice()),e=`simpl_${this.configId}_div`;if(!(isNaN(t)||this.total_price===t&&document.getElementById(e))){y("PDP Rerendered",{old:this.total_price,new:t});const e=this.getRenderElement();this.total_price=t,e&&(this.renderToEle=e,this.constructSimplWidgetEle(),y("PDP widget reconstructed"),this.widgetEle&&this.appendSimplWidgetToDOM())}return this}startObserver(){var t;return C.startObserver(null==(t=a(this.simplConfig[this.configId].priceXPath))?void 0:t.parentElement,(()=>this.renderToDOM()))}}class T{constructor(t,e,i,n,o,r,s,l){this.shopifyConfig=t,this.pdp=e,this.ajaxCart=i,this.cart=n,this.ajaxCartObserver=o,this.cartObserver=r,this.productObserver=s,this.clientEventLogs=v,this.version=l,this.utils={getElementByXpath:a,derivedPriceFromPriceString:m,getPageTypeByUrl:p,getPageTypeByIdentifier:u,isVisible:f,lightOrDark:g}}init(){window.simpl_pi3_debugger=this}}const{CHECK_COUNTRY:I}=r;const O=new class{constructor(){this.events={},this.init()}init(){this.events={[I]:this.checkCountry}}checkCountry(t){(async t=>new Promise(((e,i)=>{fetch(t).then((t=>t.json())).then((t=>{e(t)})).catch((t=>i(t)))})))(o).then((e=>{console.log(e),"IN"===e.country?t():console.log("Simpl doesn't operate in your country...")})).catch((t=>{console.log({e:t}),console.log("Simpl doesn't operate in your country...")}))}dispatchEvent(t,e,...i){console.log("Event received...",{eventName:t}),t in this.events&&this.events[t](e,i)}};new class{constructor(){this.config=b,this.simplModal=S,y("Modal Init Done"),window.location.href.includes("www.houseofblouse.com")?(console.log("checking for country"),O.dispatchEvent(r.CHECK_COUNTRY,(()=>this.init()))):this.init()}init(){let t=1,e=setInterval((()=>{var i,n,o;if(y("Ready State",{documentState:document.readyState}),console.log("Checking Ready State..."),"interactive"===document.readyState||"complete"===document.readyState){if(console.log("Ready State called",{documentState:document.readyState}),y("Ready State called",{documentState:document.readyState}),clearInterval(e),this.config.init(),y("Config Init Done"),!this.config.validateConfig())return y("Invalid config"),void this.addDebugger();y("Config validated"),this.simplModal.initializeModal(),this.loadFontAwesome(),"product"===this.config.pageType?(null==(i=this.config.simplConfig)?void 0:i.product)&&this.renderWidgetInPDP():"cart"===this.config.pageType&&(null==(n=this.config.simplConfig)?void 0:n.cart)&&this.renderWidgetInCart(),(null==(o=this.config.simplConfig)?void 0:o.ajaxcart)&&this.renderWidgetInAjaxCart(),this.addDebugger()}t++,50===t&&clearInterval(e)}),100)}renderWidgetInPDP(){y("Product Widget init"),this.renderPDP=new x,this.productObserver=this.renderPDP.renderToDOM().startObserver()}renderWidgetInCart(){y("Cart Widget init"),this.renderCart=new E,this.cartObserver=this.renderCart.renderToDOM().startObserver()}renderWidgetInAjaxCart(){y("Ajaxcart Widget init"),this.renderAjaxCart=new _,this.ajaxCartObserver=this.renderAjaxCart.startMutationObserver()}addDebugger(){new T(this.config.shopifyConfig,this.renderPDP,this.renderAjaxCart,this.renderCart,this.ajaxCartObserver,this.cartObserver,this.productObserver,this.config.scriptVersion).init()}loadFontAwesome(){if(c())y("Font Awesome already present");else{y("Loading Font Awesome");const t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("type","text/css"),t.setAttribute("href","https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"),document.getElementsByTagName("head")[0].appendChild(t)}}}}();
