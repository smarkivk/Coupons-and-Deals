(()=>{var __webpack_modules__={"./dist/sdk.min.js":
/*!*************************!*\
  !*** ./dist/sdk.min.js ***!
  \*************************/()=>{eval('var $jscomp=$jscomp||{},SW_US="/apps/webengage/service-worker",SW_IN="/apps/webengage/service-worker-in",SW_PATH="undefined"!=typeof _webengage_region&&"US"===_webengage_region?SW_US:SW_IN,WEBENGAGE_JS_LOGGER_BASE="undefined"!=typeof _webengage_region&&"US"===_webengage_region?"c.webengage.com/e.jpg":"c.in.webengage.com/e.jpg",APP_CDN_URL="";function getLastOrderedItems(){var e=[];try{var t=JSON.parse(localStorage.getItem("WE_LST_CHID")||"[]"),n=(new Date).getTime();e=t.filter((function(e){return n<e.expiry}))}catch(t){var o=localStorage.getItem("WE_LST_CHID");null!==o&&(e=[{chargedId:o,expiry:(new Date).getTime()+LOCAL_STORAGE_TTL}])}return localStorage.setItem("WE_LST_CHID",JSON.stringify(e)),e}function addParamsToURL(e,t){var n=[];for(var o in t)t.hasOwnProperty(o)&&null!=t[o]&&n.push(encodeURIComponent(o)+"="+encodeURIComponent(t[o]));return n.length&&(-1===e.indexOf("?")?e+="?":e.indexOf("?")!==e.length-1&&"&"!==e.charAt(e.length-1)&&(e+="&"),e+=n.join("&")),e}function insertOrderId(e){if(localStorage){var t=getLastOrderedItems(),n={chargedId:e,expiry:(new Date).getTime()+LOCAL_STORAGE_TTL};localStorage.setItem("WE_LST_CHID",JSON.stringify([].concat($jscomp.arrayFromIterable(t),[n])))}}function handleCheckout(e,t,n){if(void 0!==Shopify.checkout){var o=!0,r=""+Shopify.checkout.order_id;localStorage&&null!==localStorage.getItem("WE_LST_CHID")&&(o=!getLastOrderedItems().some((function(e){return e.chargedId===r}))),o&&(profile_push_checkout(n),insertOrderId(r))}}function push_checkout(e){var t=Shopify.checkout.line_items.length,n=[],o="";for(i=0;i<t;i++){var r={};r.Product_id=Shopify.checkout.line_items[i].product_id,r.Title=Shopify.checkout.line_items[i].title,r.Quantity=Shopify.checkout.line_items[i].quantity,r.Vendor=Shopify.checkout.line_items[i].vendor,n.push(r)}o="Charged";var a=Shopify.checkout;if(void 0!==a){shippingAddress=a.shipping_address;var g=a.total_price;"number"!=typeof g&&(g=parseFloat(g));var c={Amount:g,Currency:a.currency,Email:a.email,order_id:a.order_id,Items:n,Source:"Shopify"};"undefined"!==e&&""!==e&&1==e&&(o="Charged SDK"),"undefined"!=typeof shippingAddress&&(c.Ship_country=shippingAddress.country,c.Ship_region=shippingAddress.province,c.Ship_city=shippingAddress.city),webengage.track(o,c)}}function profile_push_checkout(e){if(null!=Shopify.checkout){if("undefined"!==e&&""!==e){var t="";"email"===e&&(t=Shopify.checkout.email),"phone"===e&&(t=Shopify.checkout.phone),"customer_id"===e&&(t=Shopify.checkout.customer_id),null!==t&&webengage.user.login(t)}var n={};Shopify.checkout.email&&(n.we_email=Shopify.checkout.email||null),Shopify.checkout.phone&&(n.we_phone=Shopify.checkout.phone||null),Shopify.checkout.shipping_address&&Shopify.checkout.shipping_address.first_name&&(n.we_first_name=Shopify.checkout.shipping_address.first_name||null),Shopify.checkout.shipping_address&&Shopify.checkout.shipping_address.last_name&&(n.we_last_name=Shopify.checkout.shipping_address.last_name||null),webengage.user.setAttribute(n)}}function loadScript(e,t){var n=document.createElement("script");n.type="text/javascript",n.readyState?n.onreadystatechange=function(){"loaded"!==n.readyState&&"complete"!==n.readyState||(n.onreadystatechange=null,t())}:n.onload=function(){t()},n.src=e,document.getElementsByTagName("head")[0].appendChild(n)}function initWebEngageSdk(e,t){var n,o=document.getElementsByTagName("script")[0];document.getElementById("_webengage_script_tag")||((n=document.createElement("script")).id="_webengage_script_tag",o.parentNode.insertBefore(n,o),n.type="text/javascript",n.async=!0,n.innerHTML=`var webengage; !function(w,e,b,n,g){function o(e,t){e[t[t.length-1]]=function(){r.__queue.push([t.join("."),arguments])}}var i,s,r=w[b],z=" ",l="init options track screen onReady".split(z),a="feedback survey notification".split(z),c="options render clear abort".split(z),p="Open Close Submit Complete View Click".split(z),u="identify login logout setAttribute".split(z);if(!r||!r.__v){for(w[b]=r={__queue:[],__v:"6.0",user:{}},i=0;i<l.length;i++)o(r,[l[i]]);for(i=0;i<a.length;i++){for(r[a[i]]={},s=0;s<c.length;s++)o(r[a[i]],[a[i],c[s]]);for(s=0;s<p.length;s++)o(r[a[i]],[a[i],"on"+p[s]])}for(i=0;i<u.length;i++)o(r.user,["user",u[i]]);setTimeout(function(){var f=e.createElement("script"),d=e.getElementById("_webengage_script_tag");f.type="text/javascript",f.async=!0,f.src=("https:"==e.location.protocol?"${"US"===t?"https://ssl.widgets.webengage.com":"https://widgets.in.webengage.com"}":"${"US"===t?"http://cdn.widgets.webengage.com":"http://widgets.in.webengage.com"}")+"/js/webengage-min-v-6.0.js",d.parentNode.insertBefore(f,d)})}}(window,document,"webengage");webengage.init("${e}")`,document.getElementsByTagName("head")[0].appendChild(n),window.isWebSDK=!0)}function initEvent(){loadScript(""!==(APP_CDN_URL="undefined"==typeof _webengage_env||"production"===_webengage_env?"//cdn-shp.webengage.com/proxy/events.js":"staging"===_webengage_env?"//d1iykqzz1cmbjy.cloudfront.net/proxy/events.js":"//cdn-shp.webengage.com/proxy/events.js")?APP_CDN_URL:"//cdn-shp.webengage.com/proxy/events.js",(function(){window.isWebEventJsLoaded=!0,we_logger=webengage&&"function"==typeof webengage.require&&"object"==typeof webengage.require("webengage/logger")&&webengage.require("webengage/logger"),we_logger?we_logger.debug("SHOPIFY EVENT JS SCRIPT LOADED"):console.log("SHOPIFY EVENT JS SCRIPT LOADED")}))}function initServiceWorker(e){var t=-1!==navigator.userAgent.indexOf("Safari")&&-1===navigator.userAgent.indexOf("Chrome");e&&!t&&serviceWorkerRegistration()}function serviceWorkerRegistration(){webengage&&"function"==typeof webengage.options&&webengage.options("webpush.registerServiceWorker",!1),"serviceWorker"in navigator&&navigator.serviceWorker.getRegistration("/apps/webengage/").then((function(e){we_logger=webengage&&"function"==typeof webengage.require&&"object"==typeof webengage.require("webengage/logger")&&webengage.require("webengage/logger"),e||navigator.serviceWorker.register(SW_PATH,{scope:"/apps/webengage/"}).then((function(e){we_logger?we_logger.debug({msg:"SHOPIFY Service Worker registered on ",ctx:e.scope}):console.log({msg:"SHOPIFY Service Worker registered on ",ctx:e.scope})})).catch((function(e){we_logger?we_logger.error({msg:"SHOPIFY Service Worker registration failed ",ctx:e}):console.error({msg:"SHOPIFY Service Worker registration failed ",ctx:e})}))}))}if(window.isWebSDK=!1,window.isWebEventJsLoaded=!1,$jscomp.scope={},$jscomp.arrayIteratorImpl=function(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}},$jscomp.arrayIterator=function(e){return{next:$jscomp.arrayIteratorImpl(e)}},$jscomp.makeIterator=function(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):$jscomp.arrayIterator(e)},$jscomp.arrayFromIterator=function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n},$jscomp.arrayFromIterable=function(e){return e instanceof Array?e:$jscomp.arrayFromIterator($jscomp.makeIterator(e))},LOCAL_STORAGE_TTL=2e56,"undefined"!=typeof _webengage_license_code)"undefined"==typeof _webengage_region&&(_webengage_region=""),initWebEngageSdk(_webengage_license_code,_webengage_region),initEvent(),initServiceWorker(_webengage_web_push_enabled);else if("undefined"!=typeof Shopify){var shopInfo="";if(window.location.href.indexOf("/checkouts/")&&"undefined"!==localStorage)if(""!==(shopInfo=localStorage.getItem("WEBENGAGE_SHOP_INFO"))&&null!==shopInfo){var shop=JSON.parse(shopInfo);initWebEngageSdk(shop.license_code,shop.region),handleCheckout(shop.license_code,shop.webhookEnabled,shop.id_type)}else fetch(addParamsToURL(`https://${WEBENGAGE_JS_LOGGER_BASE}`,{event:"SDK loading error",category:"",type:"exception.shopify.checkout-page",data:JSON.stringify({version:"6.0",text:"Failed to load sdk "+location.origin+" shopInfo missing",url:location.href}),ts:(new Date).getTime()}))}\n\n//# sourceURL=webpack://we-shopify-app/./dist/sdk.min.js?')}},__webpack_exports__={};__webpack_modules__["./dist/sdk.min.js"]()})();